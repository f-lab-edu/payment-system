## ğŸ’° payment-system

<center><img src="https://github.com/f-lab-edu/payment-system/assets/98700133/3aa62a31-a9fb-4043-89b8-7e31e1b1daee"  width="60%" height="60%"/></center>

> ê°œì¸ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
> ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ ì´ìš©í•œ ë°±ì—”ë“œ ê°œë°œ, ë¡œê·¸ ìˆ˜ì§‘ ë° í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì„ í–ˆìŠµë‹ˆë‹¤.

ì°¸ê³ ì‚¬í•­: ë³´ì•ˆìƒ ë¹„ë°€ë²ˆí˜¸ëŠ” ì•”í˜¸í™”ë¼ì„œ ì €ì¥ë©ë‹ˆë‹¤.

<br>

### ğŸ“Œ í”„ë¡œì íŠ¸ ì„¤ëª…

> í‰ì†Œ ëˆì˜ íë¦„ì— ê´€ì‹¬ì´ ë§ì•„ ê²°ì œ ì‹œìŠ¤í…œì„ êµ¬í˜„í•´ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì„ í–ˆê³ , ì¹´ì¹´ì˜¤ì™€ í† ìŠ¤ ê²°ì œ apië¥¼ ì—°ë™í•œ ê²°ì œ ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
> ê²°ì œ í”„ë¡œì„¸ìŠ¤ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

<center><img src="https://github.com/f-lab-edu/payment-system/assets/98700133/7650eaea-d9d2-4db6-b36e-7830aa06a4a0"  width="60%" height="60%"/></center>

<br>


### ğŸ“Œ í´ë” êµ¬ì¡°

<br>


<details>
    <summary> ğŸ§· í”„ë¡œì íŠ¸ êµ¬ì¡° í¼ì³ë³´ê¸°</summary>

```bash
main
â”œâ”€â”€ java
â”‚   â”œâ”€â”€ flab.payment_system
â”‚   â”‚   â”œâ”€â”€  config
â”‚   â”‚   â”‚   â”œâ”€â”€  AppConfig
â”‚   â”‚   â”‚   â”œâ”€â”€  QueryDslConfiguration
â”‚   â”‚   â”‚   â”œâ”€â”€  RedisConfig
â”‚   â”‚   â”‚   â”œâ”€â”€  WebConfig
â”‚   â”‚   â”‚   â””â”€â”€  WebMvcConfiguration
â”‚   â”‚   â”œâ”€â”€  core # ê³µí†µ
â”‚   â”‚   â”‚   â”œâ”€â”€  data
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  BaseEntity
â”‚   â”‚   â”‚   â”œâ”€â”€  enums
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  Constant
â”‚   â”‚   â”‚   â”œâ”€â”€  exception
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  BadRequestException
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  BaseException
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  ConflictException
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  CustomExceptionHandler
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  ExceptionMessage
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  ForbiddenException
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  OkException
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  ServiceUnavailableException
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  UnauthorizedException
â”‚   â”‚   â”‚   â”œâ”€â”€  filter
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  ExceptionHandlerFilter
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  SignInCheckFilter
â”‚   â”‚   â”‚   â”œâ”€â”€  interceptor
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  LoggingInterceptor
â”‚   â”‚   â”‚   â”œâ”€â”€  response
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  ResponseMessage
â”‚   â”‚   â”‚   â””â”€â”€  utils
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  CookieUtil
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  IpUtil
â”‚   â”‚   â”œâ”€â”€  domain
â”‚   â”‚   â”‚   â”œâ”€â”€  log
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  domain
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  AppLogs
â”‚   â”‚   â”‚   â”œâ”€â”€  mail
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  service
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  MailService
â”‚   â”‚   â”‚   â”œâ”€â”€  order
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  controller
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderController
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  domain
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  Order
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  dto
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderCancelDto
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderDetailDto
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderProductDto
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€ exception
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderNotExistBadRequestException
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€ repository
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderCustomRepository
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderCustomRepositoryImpl
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderRepository
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€ service
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  OrderService
â”‚   â”‚   â”‚   â”œâ”€â”€  payment
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  client
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  kakao
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€  PaymentKakaoClient
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  toss
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€  PaymentTossClient
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  controller
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  PaymentController
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  domain
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€ Payment
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  kakao
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ Amount
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ ApprovedCancelAmount
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ CancelAvailableAmount
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ CanceledAmount
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ CardInfo
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ KakaoPayment
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ PaymentActionDetails
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€  toss
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ Cacnels
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ Card
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ CashReceipt
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ Checkout
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ Discount
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ EasyPay
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ Failure
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ GiftCertificate
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ MobilePhone
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ Receipt
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ RefundReceiveAccount
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ TossPayment
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ Transfer
â”‚   â”‚   â”‚   â”‚  â”‚  â”‚  â”œâ”€â”€ VirtualAccount
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  enums
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€ PaymentPgCompany
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€ PaymentPgCompanyStringToEnumConverter
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€ PaymentStateConstant
â”‚   â”‚   â”‚   â”‚  â”œâ”€â”€  exception
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€ PaymentFailBadRequestException
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€ PaymentKakaoServiceUnavailableException
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€ PaymentNotExistBadRequestException
â”‚   â”‚   â”‚   â”‚  â”‚  â”œâ”€â”€ PaymentTossServiceUnavailableException














â”‚   â”‚   â””â”€â”€â”€ app
â”œâ”€â”€ resources
â”‚   â”œâ”€â”€ static
â”‚   â”‚  â””â”€â”€  index.html
â”‚   â”œâ”€â”€ templates
â”‚   â”‚  â””â”€â”€  mail.html
â”‚   â”œâ”€â”€ application.yml
â”‚   â”œâ”€â”€ log4jdbc.log4j2.properties
â”‚   â”œâ”€â”€ logback-spring-local.xml
â””   â””â”€â”€ logback-spring-prod.xml
```


<!-- summary ì•„ë˜ í•œì¹¸ ê³µë°± ë‘ê³  ë‚´ìš© ì‚½ì… -->

</details>




<br>


### ğŸ“Œ api & db ì„¤ê³„

:clipboard:[apiì„¤ê³„](https://closed-glade-095.notion.site/flab-d83ee2e4bd5d4f0cb3645f597ec53f2f)

- db ì„¤ê³„

![image](https://github.com/f-lab-edu/payment-system/assets/98700133/772ffa43-9b4b-4cb7-89c2-76b15b6fc616)

![image](https://github.com/f-lab-edu/payment-system/assets/98700133/497b2954-082b-4fc4-a7e0-8253b75d3b00)

ê²°ì œì— ëŒ€í•œ ê³µí†µì ì¸ ì •ë³´ëŠ” payment í…Œì´ë¸”ì— ì €ì¥í•˜ê³ , pgì‚¬ ë³„ë¡œ ë‹¬ë¼ì§€ëŠ” ì •ë³´ë“¤ì€ ë”°ë¡œ í…Œì´ë¸”ì„ ë§Œë“¤ì–´ì¤¬ìŠµë‹ˆë‹¤.

<br>


### ğŸ“Œ ê°œë°œ ìŠ¤íƒ
* for Application : `Java 17` `Spring boot` `MySQL` `JPA` `QueryDSL` `Junit5` `redis`

* for production : `Docker`

<br>


### ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥

1) íšŒì›ê°€ì…
  - ì„œë²„ì—ì„œ ìœ ì € ì •ë³´ ê´€ë¦¬
  - ê°€ì… ì‹œ ìœ ì € ì•„ì´ë”” ëŒ€ì‹  ì´ë©”ì¼ë¡œ ê°€ì…í•˜ë„ë¡ í•˜ê³ , ì´ë©”ì¼ë¡œ ì¸ì¦ë²ˆí˜¸ë¥¼ ë³´ë‚´ì„œ ì¸ì¦í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹
  - redisì— ì¸ì¦ë²ˆí˜¸ ì •ë³´ ì €ì¥í•´ì„œ ttlì•ˆì— ì¸ì¦í•˜ë„ë¡ í•˜ë„ë¡í•˜ê³ , ì‹œê°„ì´ ì§€ë‚˜ë©´ ìë™ìœ¼ë¡œ ì¸ì¦ë²ˆí˜¸
  - bcrypt ë¡œ ì•”í˜¸í™”í•´ì„œ ë¹„ë°€ë²ˆí˜¸ ì €ì¥
  
  <br>
  
  
2) ë¡œê·¸ì¸
  - redis ì— ì„¸ì…˜ ì €ì¥í•œ ë¡œê·¸ì¸ ìœ ì§€ ë°©ì‹
  
  <br>
  
3) ë‹¨ê±´ ê²°ì œ / ê²°ì œ ì·¨ì†Œ / ë‹¨ê±´ ì£¼ë¬¸ ì¡°íšŒ
- ì¹´ì¹´ì˜¤, í† ìŠ¤ pgì‚¬ ì—°ë™
- enum ê°’ìœ¼ë¡œ pgì‚¬ ì‹ë³„
- ì „ëµíŒ¨í„´ì„ ì´ìš©í•´ì„œ í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ ë° ë¡œì§ìœ¼ë¡œ ì—¬ëŸ¬ pgì‚¬ api ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨ 
- í…ŒìŠ¤íŠ¸ í‚¤ ì‚¬ìš©í•´ì„œ ì‹¤ì œ ê²°ì œëŠ” ì¼ì–´ë‚˜ì§€ ì•Šë„ë¡ í•¨

<br>

4) ì£¼ë¬¸
- reddison ë¶„ì‚°ë½ì„ ì´ìš©í•´ ì¬ê³  ì²˜ë¦¬ë¥¼ ìœ„í•œ ë™ì‹œì„± ì´ìŠˆ ì²˜ë¦¬(productId ì‹ë³„ìë¡œ ì´ìš©)
- í”„ë¡œì íŠ¸ í™•ì¥ ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•´ ì„¤ê³„í•œ api ë¡œ ë‹¤ì–‘í•œ ë©”ë‰´ ê´€ë¦¬ëŠ” ë”°ë¡œ í•˜ì§€ ì•ŠìŒ

<br>


### ğŸ“Œ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ì–»ê³  ì‹¶ì€ ê¸°ìˆ  ì—­ëŸ‰

- íšŒì›ê°€ì… ì‹œ ìœ ì €ì™€ ì‚¬ì´íŠ¸ì˜ ì‹ ë¢°ì„± ìˆëŠ” ê´€ê³„ ìˆ˜ë¦½ì„ ìœ„í•´ì„œ ì´ë©”ì¼ ì¸ì¦ì„ í†µí•œ ê°€ì…, ip ëŒ€ì—­ í™•ì¸í•´ì„œ í•œêµ­ì´ ì•„ë‹ ê²½ìš° ìœ íš¨í•˜ì§€ ì•Šì€ ìš”ì²­ìœ¼ë¡œ ì²˜ë¦¬
- ì‹ ë¢°ì„± ìˆëŠ” ê²°ì œ ì‹œìŠ¤í…œì„ ìœ„í•œ ë™ì‹œì„± ì´ìŠˆ ê³ ë ¤, ì„±ëŠ¥ê³¼ ì‹ ë¢°ì„± ì ì ˆí•œ ë²”ìœ„ ë‚´ì—ì„œ trade-off ê´€ê³„ ê³ ë¯¼í•˜ê¸°
- ë¡œê·¸ì¸
  - ì„¸ì…˜ê´€ë¦¬ : ë¡œë“œë°¸ëŸ°ì‹±ì„ í†µí•œ ë¶„ì‚° ì²˜ë¦¬ ì‹œìŠ¤í…œì—ì„œ ì ì ˆí•œ ë¡œê·¸ì¸ ì„¸ì…˜ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì„¸ì…˜ì„ redisì— ê´€ë¦¬
  - í† í°ë°œí–‰ : í† í° íƒˆì·¨ ë³´ì•ˆ ë¬¸ì œì— ëŒ€í•œ ëŒ€ë¹„ì±… ê³ ë¯¼ 
- redis ë¥¼ ììœ ìì¬ë¡œ í•„ìš”í•œ ê³³ì— ì‚¬ìš©í•˜ê¸° : ìºì‹±, lock ì—¬ë¶€ í™•ì¸

<br>

### ğŸ“Œ ê°œì„ í•˜ê³  ì‹¶ì€ì 

<br>


### ğŸ“Œ ë¬¸ì œì‚¬í•­ê³¼ í•´ê²°ë°©ì•ˆ


<br>

### ğŸ“Œ íšŒê³ 

